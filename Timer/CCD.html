<!DOCTYPE html>
<html>
  <head>
    <title>Timer</title>
    <meta name="author" content="Ned Notta">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <link rel='shortcut icon' href='../Images/clock-flat.png'>
    <link rel='stylesheet' href='./timer.css'>
  </head>
   <body onLoad='load()'>
    <h1 id='title'>
    Loading....
    </h1>
    <h1 id='countDown_Live' class='clock'>
    
    </h1>
     <p id='link'>
       Loading....
     </p>
    <a href='../timer/'>Wanna make your own count down? Go here!</a>
    <script>
function load(){
  var HREF = window.location.href;
    HREF = HREF.toString();
    var HREF_INFO = HREF.substr(HREF.indexOf('?'), HREF.length); 
    var HREF_INFO_EVENT = HREF_INFO.substr(HREF_INFO.indexOf('?'), HREF_INFO.indexOf('+'));
    var HREF_INFO_DATE = HREF_INFO.substr(HREF_INFO.indexOf('+'), HREF_INFO.indexOf('+')[1]);
	  var HREF_INFO_MESSAGE = HREF_INFO_DATE.split("+")[2];
    HREF_INFO_DATE = HREF_INFO_DATE.split("+")[1];
    for (i = 0; i < HREF_INFO_EVENT.length; i++) { 
    HREF_INFO_EVENT = HREF_INFO_EVENT.replace("%20"," ");
    HREF_INFO_EVENT = HREF_INFO_EVENT.replace("%27","'");
		}
  	for (i = 0; i < HREF_INFO_EVENT.length; i++) { 
    HREF_INFO_MESSAGE = HREF_INFO_MESSAGE.replace("%20"," ");
    HREF_INFO_MESSAGE = HREF_INFO_MESSAGE.replace("%27","'");
		}
    HREF_INFO_EVENT = HREF_INFO_EVENT.replace("?","");
    
  var x = setInterval(function() {
  var now = new Date().getTime();
  var distance = HREF_INFO_DATE - now;
  var days = Math.floor(distance / (1000 * 60 * 60 * 24));
  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);
  document.getElementById("countDown_Live").innerHTML = days + " Days // " + hours + " Hours //  "
  + minutes + " Minutes // " + seconds + " Seconds";
  if (distance < 0) {
    clearInterval(x);
    document.getElementById("countDown_Live").innerHTML = HREF_INFO_MESSAGE;
  }
}, 1000);
    
    document.getElementById("title").innerHTML = HREF_INFO_EVENT;
      document.getElementById("link").innerHTML = "Shareable link: <input type='text' value='"+HREF+"' id='linkREL'><button onClick='CopyLink()'>Copy Link</button>";
    }
function CopyLink(){
var copyText = document.getElementById("linkREL");
copyText.select();
document.execCommand("Copy");
alert("Copied the link");
}
    </script>
  </body>
</html>
